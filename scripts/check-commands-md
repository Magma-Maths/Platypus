#!/usr/bin/env bash

set -euo pipefail

ROOT=$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)

# Run the updater (this may modify docs)
"$ROOT/scripts/update-commands-md"

# Check whether docs are now different from what is staged/tracked
if ! git diff --quiet -- docs/platypus.md docs/subtree.md docs/svn.md; then
  echo "Docs are out of date with respect to platypus --help output." >&2
  echo "Run: ./scripts/update-commands-md and commit the updated docs." >&2
  exit 1
fi

